<!-- preloader area start -->
<div class="preloader d-none" id="preloader">
    <div class="preloader-inner">
        <div class="spinner">
            <div class="dot1"></div>
            <div class="dot2"></div>
        </div>
    </div>
</div>
<!-- preloader area end -->
<!-- All JS Plugins -->
<script src="../../../vendor/js/plugins.js"></script>
<!-- Main JS -->
<script src="../../../vendor/js/main.js"></script>

<!-- Bootstrap core JavaScript-->
<script src="../../../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../../../vendor/datatables/jquery.dataTables.min.js"></script>
<script src="../../../vendor/datatables/dataTables.bootstrap4.min.js"></script>

<script src="../../../vendor/js/sweetalert2.all.min.js"></script>
<script src="../../../vendor/js/sweetalert2.js"></script>
<script src="../../../vendor/js/bootstrap.js"></script>

<script src="../../../vendor/js/helper.js"></script>
<script src="../../../vendor/bootstrap-select/js/bootstrap-select.js"></script>

<script>

    const logInData = JSON.parse(sessionStorage.getItem("LogInData"));

    $(document).ready(function () {
        //$('#tbUsername').html('');
        if (logInData) {
    
            $('.topbar_login').addClass('d-none');

            let user_role = "";

            if (logInData[0].user_role_id == 1) {
                user_role = 'ผู้ดูแลระบบ';
            } else if (logInData[0].user_role_id == 2) {
                user_role = 'สมาชิกทั่วไป';
            } else if (logInData[0].user_role_id == 3) {
                user_role = 'ตัวแทนขาย';
            }

            $('#tbUsername').html(` <b> ${logInData[0].user_firstName} ${logInData[0].user_lastName} <br> [${user_role}] </b> `);

            $("#bar-login").addClass('d-none');
            $("#mob-login").addClass('d-none');

            if (logInData[0].user_role_id == "2") {
                $("#bar-order").addClass('d-none');
                $("#mob-order").addClass('d-none');

                $("#bar-manage").addClass('d-none');
                $("#mob-manage").addClass('d-none');
            }
            else if (logInData[0].user_role_id == "1") {
                $("#bar-order").addClass('d-none');
                $("#mob-order").addClass('d-none');

                $("#mob-profile").addClass('d-none');
                $("#bar-profile").addClass('d-none');
            } else {
                $("#bar-manage").addClass('d-none');
                $("#mob-manage").addClass('d-none');
            }
        } else {
            $("#mob-profile").addClass('d-none');
            $("#bar-profile").addClass('d-none');
            $("#mob-exit").addClass('d-none');
            $("#bar-exit").addClass('d-none');
            $("#bar-order").addClass('d-none');
            $("#mob-order").addClass('d-none');
            $("#bar-manage").addClass('d-none');
            $("#mob-manage").addClass('d-none');
        }

    });


    function checkLogin(permission_role) {

        if (logInData == null) {
            alert('กรุณาเข้าสู่ระบบ!!');
            window.location.href = "../home/login";
        }

        if (logInData[0].user_role_id == 1) {
            //system admin ผ่าน

        } else if (logInData[0].user_role_id != permission_role) {
            alert(" คุณไม่ได้รับสิทธิ์เข้า!! ");
            window.location.href = "../home/main";
        }
    }

    function logOutClick() {

        sessionStorage.setItem("LogInData", null)
        //window.location.reload();
        window.location.href = "../home/main";
    }


</script>